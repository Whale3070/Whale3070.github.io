

  <!DOCTYPE html>
  <html lang="en" data-default-color-scheme=&#34;dark&#34; >
  <style>
    .text1
    {
    text-shadow: 0px 0px 2px #f2f3f2;
    }
    </style>

  

<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/null">
  <link rel="icon" type="image/png" href="/null">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  <title>COBOL考古（十） - whale3070&#39;s blog</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.7","typing":{"enable":false,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 6.0.0"></head>


    <body>
      <header style="height: 70vh;">
        <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>InfoSec learning</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                Categories
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Tags
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          
        
      </ul>
    </div>
  </div>
</nav>

          <div class="banner" id="banner" false
            style="background: url('/img/default.png') no-repeat center center;
              background-size: cover;">
              <div class="full-bg-img">
                <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
                  <div class="page-header text-center fade-in-up">
                    <span class="h2 text1" id="subtitle" title="COBOL考古（十）">
                      
                        COBOL考古（十）
                      
                    </span>
        
                    
                      <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2023-10-01 15:06" pubdate>
        October 1, 2023 pm
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      4.7k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      55
       分钟
    </span>
  

  
  
</div>

                    
                  </div>
                    
                  </div>
                  
                </div>
              </div>
          </div>
      </header>

      <main>
        
          

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">COBOL考古（十）</h1>
            
            <div class="markdown-body">
              <h2 id="Lab"><a href="#Lab" class="headerlink" title="Lab"></a>Lab</h2><p>这个实验使用位于您的id.CBL数据集中的COBOL程序CBL0033，以及位于您的id.JCL数据集中的JCL作业CBL0033J。 JCL作业用于编译和执行COBOL程序，如前几章所讨论的那样。</p>
<h4 id="使用VS-Code和Zowe-Explorer"><a href="#使用VS-Code和Zowe-Explorer" class="headerlink" title="使用VS Code和Zowe Explorer"></a>使用VS Code和Zowe Explorer</h4><ol>
<li><p>请花点时间查看提供的COBOL程序CBL0033的源代码。</p>
</li>
<li><p>将CBL0033与前一个实验中的CBL0001和CBL0002进行比较。您是否注意到了差异？</p>
<p>a. 观察工作存储 &gt; 数据部分中的新COUNTER行。</p>
<p>b. 观察段落被编号，并且它们都明确地以-END语句结束。</p>
<p>c. 观察PROCEDURE DIVISION中的新段落READ-FIRST-RECORD、READ-TEN-RECORDS、READ-ANOTHER-RECORD、READ-NEXT-RECORDS和CALLING-SUBPROGRAM。</p>
<p>d. 这些段落以不同的方式使用PERFORM语句执行与CBL0001中相同的循环。CALLING-SUBPROGRAM调用HELLO程序，该程序已经在本课程的第二个实验中介绍过。</p>
</li>
<li><p>提交作业：CBL0033J。这个JCL首先编译HELLO程序，然后编译CBL0033，并将两次编译的结果链接在一起。</p>
</li>
<li><p>使用JOBS部分查看CBL0033J的输出，并打开RUN:PRTLINE，观察报告与CBL0001相同。</p>
</li>
<li><p>使用JOBS部分查看目标程序HELLO的输出，并打开RUN:SYSOUT。</p>
</li>
</ol>
<h1 id="文件输出"><a href="#文件输出" class="headerlink" title="文件输出"></a>文件输出</h1><p>设计一个易于阅读和理解的结构化布局是格式化输出的要求。设计结构化布局涉及使用空格、数字格式、货币格式等列标题和变量对齐。本章旨在利用示例COBOL代码来解释这个概念，以设计列标题并在这些标题下对齐数据名称。在本章末尾，您将被要求完成一个实验，练习涵盖的组件的实施。</p>
<p>值得注意的是，虽然本章未涵盖的一个COBOL数据输出格式化功能是COBOL是一种支持Web的计算机语言。COBOL包括将现有COBOL代码快速转换为编写JSON（JavaScript对象表示法）的功能，随后输出将格式化为浏览器、智能手机等设备。经常情况下，智能手机访问的关键数据，如银行余额，是由z/OS存储和控制的，而COBOL程序负责检索并将银行余额返回到智能手机。</p>
<ul>
<li><p><strong>COBOL写输出流程回顾</strong></p>
<ul>
<li><strong>环境部分</strong></li>
</ul>
</li>
<li><p><strong>文件描述符</strong></p>
<ul>
<li><strong>FILLER</strong></li>
</ul>
</li>
<li><p><strong>报告和列标题</strong></p>
<ul>
<li><strong>HEADER-2</strong></li>
</ul>
</li>
<li><p><strong>过程部分</strong></p>
<ul>
<li><p><strong>MOVE语句</strong></p>
</li>
<li><p><strong>FROM语句的PRINT-REC</strong></p>
</li>
</ul>
</li>
<li><p><strong>实验</strong></p>
</li>
</ul>
<h2 id="COBOL写输出流程回顾"><a href="#COBOL写输出流程回顾" class="headerlink" title="COBOL写输出流程回顾"></a>COBOL写输出流程回顾</h2><p>本节简要回顾了环境部分的某些方面，以便理解它与本章内容的关联。</p>
<h3 id="环境部分"><a href="#环境部分" class="headerlink" title="环境部分"></a>环境部分</h3><p>“文件处理”部分涵盖了SELECT和相应的ASSIGN程序员选择的名称，而本章关注输出。图1显示了一个使用PRINT-LINE作为程序员选择的COBOL内部文件名的编码示例。</p>
<p><img src="image141.png" srcset="/img/loading.gif"></p>
<p><em>图1. SELECT和ASSIGN</em></p>
<h2 id="文件描述符"><a href="#文件描述符" class="headerlink" title="文件描述符"></a>文件描述符</h2><p>文件描述符（FD），先前在FILE-CONTROL段落部分描述，表示文件部分中组织的最高级别。FD条目描述了由前面的FILE-CONTROL SELECT语句定义的文件的布局。因此，FD条目将SELECT文件名与文件名的定义布局连接起来。图2显示了PRINT-LINE的示例文件描述符FD。文件描述符后面是PRINT-LINE的定义布局。</p>
<h3 id="FILLER"><a href="#FILLER" class="headerlink" title="FILLER"></a>FILLER</h3><p>请注意数据名称FILLER。虽然大多数数据字段都有唯一的名称，但FILLER是COBOL保留字数据名称，用于输出格式化。这部分是因为FILLER分配内存空间而无需名称。此外，FILLER分配的内存在输出行中具有定义的长度，可以包含空格或任何文字。图2显示了多个FILLER的VALUE SPACES示例。SPACES在输出中创建数据项之间的空格，有助于保持代码的可读性。更具体地说，在图2中，FILLER PIC X(02) VALUE SPACES表示包含两个空格的输出行。</p>
<p><img src="image142.png" srcset="/img/loading.gif"></p>
<p><em>图2. FILLER</em></p>
<h2 id="报告和列标题"><a href="#报告和列标题" class="headerlink" title="报告和列标题"></a>报告和列标题</h2><p>编写报告或列标题需要程序员设计的结构化输出布局。图3说明了这样的结构。设计的输出结构布局在DATA DIVISION中实现，并包括下面列出和定义的标题。</p>
<ul>
<li><p><strong>HEADER-1:</strong></p>
<ul>
<li><p>写入文字</p>
</li>
<li><p>例子：’财务报告’</p>
</li>
</ul>
</li>
<li><p><strong>HEADER-2:</strong></p>
<ul>
<li><p>写入文字</p>
</li>
<li><p>例子：</p>
<ul>
<li><p>‘年’后跟一个变量名</p>
</li>
<li><p>‘月’后跟一个变量名</p>
</li>
<li><p>‘日’后跟一个变量名</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>HEADER-3:</strong></p>
<ul>
<li><p>写入文字</p>
</li>
<li><p>例子：</p>
<ul>
<li><p>‘账户’后跟FILLER间隔</p>
</li>
<li><p>‘姓’后跟FILLER间隔</p>
</li>
<li><p>‘限额’后跟FILLER间隔</p>
</li>
<li><p>‘余额’后跟FILLER间隔</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>HEADER-4:</strong></p>
<ul>
<li>写入短横线，后跟FILLER间隔</li>
</ul>
</li>
</ul>
<p><img src="image143.png" srcset="/img/loading.gif"></p>
<p><em>图3. 设计的输出结构布局</em></p>
<h3 id="HEADER-2"><a href="#HEADER-2" class="headerlink" title="HEADER-2"></a>HEADER-2</h3><p>HEADER-2包括报告的年份、月份、日期以及FILLER区域，它们在图3中创建了年份、月份和日期之间的空白间隔。图4是用于存储CURRENT-DATE值的数据名称布局示例。COBOL在CURRENT-DATE中提供的信息用于填充HEADER-2中的输出文件。</p>
<p><img src="image144.png" srcset="/img/loading.gif"></p>
<p><em>图4. CURRENT-DATE内部函数</em></p>
<h2 id="PROCEDURE-DIVISION"><a href="#PROCEDURE-DIVISION" class="headerlink" title="PROCEDURE DIVISION"></a>PROCEDURE DIVISION</h2><p>图1到图4是一个设计的数据布局，包括数据行和报告标题。使用数据行和报告标题映射的存储，COBOL处理逻辑可以写入报头，然后是每个数据行。图5是一个示例，显示了用于在COBOL程序中编写报头布局结构的执行逻辑。</p>
<p><img src="image145.png" srcset="/img/loading.gif"></p>
<p><em>图5. 编写报头布局结构的执行逻辑</em></p>
<h3 id="MOVE语句"><a href="#MOVE语句" class="headerlink" title="MOVE语句"></a>MOVE语句</h3><p>COBOL MOVE语句位于WRITE-HEADERS段落中的第1行，它从系统中收集当前日期信息并将该信息存储在定义的数据名称布局WS-CURRENT-DATE-DATA中。使用保留字FUNCTION意味着其后的内容是COBOL内部函数。第2、3和4行的语句将日期信息，年份、月份和日期，存储在HEADER-2定义的数据名称区域HDR-YR、HDR-MO和HDR-DAY中。第11行的语句，是段落中的最后一句，将空格写入PRINT-REC区域，以清除准备写入数据行的行存储区。</p>
<h3 id="FROM语句的PRINT-REC"><a href="#FROM语句的PRINT-REC" class="headerlink" title="FROM语句的PRINT-REC"></a>FROM语句的PRINT-REC</h3><p>PRINT-REC已经以输出方式打开，接下来的PRINT-REC FROM将按照不同的报头或定义的数据名称布局写入PRINT-REC。第5和6行的语句将PRINT-REC FROM定义的报头数据名称HEADER-1和HEADER-2写入图3中。图2中的PRINT-REC文件描述符数据名称有效地被图3中报头数据名称的内容替换，写入输出。第7和8行的语句在报头之间写入了一行空白。第9和10行的语句将PRINT-REC FROM定义的HEADER-3和HEADER-4数据名称从图3中写入。图2中的PRINT-REC文件描述符数据名称有效地被图3中报头数据名称的内容替换。</p>
<h4 id="使用VS-Code和Zowe-Explorer-1"><a href="#使用VS-Code和Zowe-Explorer-1" class="headerlink" title="使用VS Code和Zowe Explorer"></a>使用VS Code和Zowe Explorer</h4><ol>
<li><p>提交作业：CBL0004J</p>
</li>
<li><p>观察报告，其中包括如图6所示的报头。</p>
</li>
</ol>
<p><img src="image146.png" srcset="/img/loading.gif"></p>
<p><em>图6. 带有报头的报告</em></p>
<ol start="3">
<li><p>提交作业：CBL0005J</p>
</li>
<li><p>观察报告数据行是没有美元货币符号的，如图7所示。</p>
</li>
</ol>
<p><img src="image147.png" srcset="/img/loading.gif"></p>
<p><em>图7. 输出中没有货币符号</em></p>
<ol start="5">
<li><p>修改id.CBL(CBL0005)以在报告中包含美元货币符号。</p>
<p><strong>提示：与CBL0004的第33行进行比较</strong></p>
</li>
<li><p>重新提交作业：CBL0005J</p>
</li>
<li><p>观察报告数据行现在应该包含美元货币符号，如图8所示。</p>
</li>
</ol>
<p><img src="image148.png" srcset="/img/loading.gif"></p>
<p><em>图8. 输出中添加了货币符号</em></p>
<p>\newpage</p>
<h1 id="条件表达式"><a href="#条件表达式" class="headerlink" title="条件表达式"></a>条件表达式</h1><p>本章深入探讨了程序如何根据程序员编写的逻辑做出决策。具体来说，程序在源代码的PROCEDURE DIVISION中做出这些决策。我们将通过有用的解释、示例以及最终通过实验来练习实现，扩展关于在COBOL中编写的条件表达式的几个主题。</p>
<ul>
<li><p><strong>布尔逻辑，运算符，操作数和标识符</strong></p>
<ul>
<li><p><strong>COBOL条件表达式和运算符</strong></p>
</li>
<li><p><strong>使用布尔运算符的条件表达式示例</strong></p>
</li>
</ul>
</li>
<li><p><strong>条件表达式保留字和术语</strong></p>
<ul>
<li><p><strong>IF，EVALUATE，PERFORM和SEARCH</strong></p>
</li>
<li><p><strong>条件状态</strong></p>
</li>
<li><p><strong>条件名称</strong></p>
</li>
</ul>
</li>
<li><p><strong>条件运算符</strong></p>
</li>
<li><p><strong>条件表达式</strong></p>
<ul>
<li><p><strong>IF ELSE（THEN）语句</strong></p>
</li>
<li><p><strong>EVALUATE语句</strong></p>
</li>
<li><p><strong>PERFORM语句</strong></p>
</li>
<li><p><strong>SEARCH语句</strong></p>
</li>
</ul>
</li>
<li><p><strong>条件</strong></p>
<ul>
<li><p><strong>关系条件</strong></p>
</li>
<li><p><strong>类条件</strong></p>
</li>
<li><p><strong>符号条件</strong></p>
</li>
</ul>
</li>
<li><p><strong>实验</strong></p>
</li>
</ul>
<h2 id="布尔逻辑，运算符，操作数和标识符"><a href="#布尔逻辑，运算符，操作数和标识符" class="headerlink" title="布尔逻辑，运算符，操作数和标识符"></a>布尔逻辑，运算符，操作数和标识符</h2><p>程序基于程序员编写的逻辑做出决策。程序的决策使用布尔逻辑进行，其中条件表达式要么为真，要么为假，是或否。一个简单的例子是一个名为’LANGUAGE’的变量。有许多编程语言存在；因此，变量LANGUAGE的值可以是Java、COBOL等等…假设LANGUAGE的值是COBOL。布尔逻辑是，IF LANGUAGE = COBOL，THEN DISPLAY COBOL，ELSE DISPLAY NOT COBOL。IF触发布尔逻辑以确定条件真/假，是/否，应用于LANGUAGE = COBOL，这是条件表达式。IF条件的结果在条件为真时执行THEN后面的内容，在条件为假时执行ELSE后面的内容。</p>
<p>布尔IF动词操作两个操作数或标识符。在上面的示例中，LANGUAGE是一个操作数，COBOL是一个操作数。布尔关系运算符比较每个操作数的值。</p>
<h3 id="COBOL条件表达式和运算符"><a href="#COBOL条件表达式和运算符" class="headerlink" title="COBOL条件表达式和运算符"></a>COBOL条件表达式和运算符</h3><p>COBOL条件表达式的三种最常见类型是：</p>
<ol>
<li><p>一般关系条件</p>
</li>
<li><p> 类条件</p>
</li>
<li><p> 符号条件</p>
</li>
</ol>
<p>COBOL条件表达式的常见类型的每种类型的COBOL布尔关系运算符列表如下图1、图2和图3所示。</p>
<p><img src="image149.png" srcset="/img/loading.gif"></p>
<p><em>图1. 一般关系条件运算符</em></p>
<p><img src="image150.png" srcset="/img/loading.gif"></p>
<p><em>图2. 类条件运算符</em></p>
<p><img src="image151.png" srcset="/img/loading.gif"></p>
<p><em>图3. 符号条件运算符</em></p>
<h3 id="使用布尔运算符的条件表达式示例"><a href="#使用布尔运算符的条件表达式示例" class="headerlink" title="使用布尔运算符的条件表达式示例"></a>使用布尔运算符的条件表达式示例</h3><p>一个简单的条件表达式可以写成：</p>
<p><code>IF 5 &gt; 1 THEN DISPLAY &#39;5 is greater than 1&#39; ELSE DISPLAY &#39;1 is greater than 5&#39;。</code></p>
<p>复杂的条件表达式括在括号内，它们的布尔运算符是：</p>
<p><code>AND</code></p>
<p><code>OR</code></p>
<p>下面的代码片段演示了使用AND布尔运算符的复杂条件表达式。</p>
<p><code>IF (5 &gt; 1 AND 1 &gt; 2) THEN .... ELSE ....</code></p>
<p>这个条件表达式的结果为false，因为5 &gt; 1为true，1 &gt; 2为false。AND操作要求两个表达式都为true，才能返回复合条件表达式的true。让我们展示另一种实现，这次使用OR布尔运算符。</p>
<p><code>IF (5 &gt; 1 OR 1 &gt; 2) THEN .... ELSE ....</code></p>
<p>这个条件表达式的结果为true，因为1 &gt; 2为false，5 &gt; 1为true。OR操作只需要一个表达式为true，就能返回整个复杂条件表达式的true。进一步讨论用于关系、类和符号条件的更多条件运算符将在本章中进一步讨论。</p>
<h2 id="条件表达式保留字和术语"><a href="#条件表达式保留字和术语" class="headerlink" title="条件表达式保留字和术语"></a>条件表达式保留字和术语</h2><p>到目前为止，在本书中，我们已经涉及了COBOL保留字的必要性和用法。本节旨在扩展保留字的主题，特别是在处理条件表达式时使用的保留字。</p>
<h3 id="IF、EVALUATE、PERFORM和SEARCH"><a href="#IF、EVALUATE、PERFORM和SEARCH" class="headerlink" title="IF、EVALUATE、PERFORM和SEARCH"></a>IF、EVALUATE、PERFORM和SEARCH</h3><p>这些是COBOL保留字，用于处理条件表达式，其中条件是可以设置或更改的状态。</p>
<h3 id="条件状态"><a href="#条件状态" class="headerlink" title="条件状态"></a>条件状态</h3><p>TRUE和FALSE是最常见的条件状态之一。</p>
<h3 id="条件名"><a href="#条件名" class="headerlink" title="条件名"></a>条件名</h3><p>条件名是带有TRUE条件状态的程序员定义的变量名。条件名在工作存储段中用88级别号声明。88级别的目的是通过简化IF和PERFORM UNTIL语句来提高可读性。</p>
<p>88级别条件数据名在编译时分配一个值。程序在程序执行期间无法更改88级别数据名。但是，程序可以更改88级别条件数据名上面级别号中的数据名值。示例1中的01级别USA-STATE可以更改。引用88级别数据名的程序表达式仅在前一个级别数据名USA-STATE的当前值等于工作存储的88级别条件数据名分配的值时为真。</p>
<p>请注意，在示例1中，“The State is not Texas”是作为第一个IF STATE的结果编写的，因为USA-STATE的值是AZ，不等于88级别条件数据名TX。第二个IF STATE写入“The State is Texas”，因为USA-STATE的值等于TX的分配的88级别值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs COBOL">WORKING-STORAGE SECTION.<br>01 USA-STATE     PIC X(2) VALUE SPACES.<br>   88 STATE      VALUE &#x27;TX&#x27;.<br>....<br>....<br>PROCEDURE DIVISION.<br>....<br>....<br>MOVE &#x27;AZ&#x27; TO USA-STATE.<br>....<br>....<br>IF STATE DISPLAY &#x27;The State is Texas&#x27;<br>   ELSE DISPLAY  &#x27;The State is not Texas&#x27;<br>END-IF.<br>....<br>....<br>MOVE &#x27;TX&#x27; TO USA-STATE.<br>....<br>....<br>IF STATE DISPLAY &#x27;The State is Texas&#x27;<br>   ELSE DISPLAY  &#x27;The State is not Texas&#x27;<br>END-IF.<br></code></pre></div></td></tr></table></figure>
<p><em>示例1. 使用88级别条件名</em></p>
<p>许多88级别的条件数据名可以跟随一个01级别的数据名。因此，对01级别的数据名表达式的IF引用可以具有返回true的许多值。</p>
<p>其他级别号数据名要求条件表达式包括布尔运算符，如示例2所示，其中可以将一个值存储在05级别的STATE数据名中，然后与其他存储的值进行比较。因此，需要进行一些额外的编码。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs COBOL">WORKING-STORAGE SECTION.<br>01 USA-STATE.<br>   05 STATE      PIC X(2) VALUE SPACES.<br>....<br>....<br>PROCEDURE DIVISION.<br>....<br>....<br>MOVE &#x27;AZ&#x27; TO STATE.<br>....<br>....<br>IF STATE = &#x27;TX&#x27; DISPLAY &#x27;The State is Texas&#x27;<br>   ELSE DISPLAY  &#x27;The State is not Texas&#x27;<br>END-IF.<br>....<br>....<br>MOVE &#x27;TX&#x27; TO STATE.<br>....<br>....<br>IF STATE = &#x27;TX&#x27; DISPLAY &#x27;The State is Texas&#x27;<br>   ELSE DISPLAY  &#x27;The State is not Texas&#x27;<br>END-IF.  <br></code></pre></div></td></tr></table></figure>
<p><em>示例2. 没有88级别条件名</em></p>
<h2 id="条件运算符"><a href="#条件运算符" class="headerlink" title="条件运算符"></a>条件运算符</h2><p>关系运算符比较数字、字符串或逻辑数据。比较的结果，要么是真（1），要么是假（0），可以用来决定程序流程。表1显示了一些关系运算符，它们的书写方式以及它们的含义。</p>
<table>
<thead>
<tr>
<th>关系运算符</th>
<th>可以写成</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>大于</td>
<td>&gt;</td>
<td>大于</td>
</tr>
<tr>
<td>不大于</td>
<td>不大于 &gt;</td>
<td>不大于</td>
</tr>
<tr>
<td>小于</td>
<td>&lt;</td>
<td>小于</td>
</tr>
<tr>
<td>不小于</td>
<td>不小于 &lt;</td>
<td>不小于</td>
</tr>
<tr>
<td>等于</td>
<td>=</td>
<td>等于</td>
</tr>
<tr>
<td>不等于</td>
<td>不等于 =</td>
<td>不等于</td>
</tr>
<tr>
<td>大于或等于</td>
<td>&gt;=</td>
<td>大于或等于</td>
</tr>
<tr>
<td>小于或等于</td>
<td>&lt;=</td>
<td>小于或等于</td>
</tr>
</tbody></table>
<p><em>表1. 关系运算符</em></p>
<h2 id="条件表达式-1"><a href="#条件表达式-1" class="headerlink" title="条件表达式"></a>条件表达式</h2><p>条件表达式使目标程序根据测试的真值选择控制的替代路径。条件表达式在EVALUATE、IF、PERFORM和SEARCH语句中指定。</p>
<h3 id="IF-ELSE（THEN）语句"><a href="#IF-ELSE（THEN）语句" class="headerlink" title="IF ELSE（THEN）语句"></a>IF ELSE（THEN）语句</h3><p>IF语句用于执行或评估关系操作。 IF ELSE用于编写在两个处理操作之间进行选择的情况，并且THEN关键字是可选的。当存在IF语句时，将根据条件表达式的真假来处理IF语句后面的语句。语句将被处理，直到遇到END-IF或ELSE语句为止。ELSE语句可以出现在END-IF之前的任何行上。IF语句，无论有多少行，都要使用END-IF明确终止。</p>
<p>考虑这种情况，在程序处理期间发生某些事情以更改数据名FACIAL-EXP的值。随后的语句，条件表达式，需要检查数据名的值以决定在程序中如何继续进行。示例3中的THEN DISPLAY和ELSE DISPLAY语句进行了说明。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs COBOL">IF FACIAL-EXP = &#x27;HAPPY&#x27; THEN<br>   DISPLAY &#x27;I am glad you are happy&#x27;<br>ELSE DISPLAY &#x27;What can I do to make you happy&#x27;<br>END-IF.<br></code></pre></div></td></tr></table></figure>

<p><em>示例3. IF、THEN、ELSE、END-IF语句</em></p>
<h3 id="EVALUATE语句"><a href="#EVALUATE语句" class="headerlink" title="EVALUATE语句"></a>EVALUATE语句</h3><p>EVALUATE语句用于编写在三个或更多可能操作中进行选择的情况。EVALUATE语句的显式终止符为END-EVALUATE。EVALUATE语句是IF语句的扩展形式，允许您避免嵌套IF语句，这是逻辑错误和调试问题的常见来源。EVALUATE操作文本字符串值和数值变量。使用FACIAL-EXP条件名，可以在示例4中看到实现EVALUATE语句的COBOL代码。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs COBOL">EVALUATE FACIAL-EXP<br> WHEN &#x27;HAPPY&#x27;<br>  DISPLAY &#x27;I am glad you are happy&#x27;<br> WHEN &#x27;SAD&#x27;<br>  DISPLAY &#x27;What can I do to make you happy&#x27;<br> WHEN &#x27;PERPLEXED&#x27;<br>  DISPLAY &#x27;Can you tell me what you are confused about&#x27;<br> WHEN &#x27;EMOTIONLESS&#x27;<br>  DISPLAY &#x27;Do you approve or disapprove&#x27;<br>END-EVALUATE<br></code></pre></div></td></tr></table></figure>

<h3 id="PERFORM语句"><a href="#PERFORM语句" class="headerlink" title="PERFORM语句"></a>PERFORM语句</h3><p>带有UNTIL短语的PERFORM语句是一种条件表达式。在UNTIL短语格式中，所引用的过程将执行，直到由UNTIL短语指定的条件评估为真为止。使用FACIAL-EXP条件名，连续执行SAY-SOMETHING-DIFFERENT段，直到FACIAL-EXP包含’HAPPY’，请查看示例5。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs COBOL">WORKING-STORAGE SECTION.<br>01 FACIAL-EXP    PIC X(11) VALUE SPACES.<br>   88 HAPPY      VALUE &#x27;HAPPY&#x27;.<br>....<br>....<br>PROCEDURE DIVISION.<br>....<br>....<br>PERFORM SAY-SOMETHING-DIFFERENT UNTIL HAPPY<br>END-PERFORM.<br></code></pre></div></td></tr></table></figure>

<p><em>示例5. 使用88级条件名的PERFORM语句</em></p>
<p>也可以在不使用88级条件名的情况下使用PERFORM语句，如示例6所示。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs COBOL">WORKING-STORAGE SECTION.<br>01 FACIAL-EXP    PIC X(11) VALUE SPACES.<br>....<br>....<br>PROCEDURE DIVISION.<br>....<br>....<br>PERFORM SAY-SOMETHING-DIFFERENT UNTIL FACIAL-EXP = &quot;HAPPY&quot;<br>END-PERFORM.<br></code></pre></div></td></tr></table></figure>

<p><em>示例6. 不使用88级条件名的PERFORM语句</em></p>
<h3 id="SEARCH语句"><a href="#SEARCH语句" class="headerlink" title="SEARCH语句"></a>SEARCH语句</h3><p>SEARCH语句在表中搜索满足指定条件的元素，并调整相关的索引以指示该元素。表实际上是一组值的数组，它们是使用应用于WORK-STORAGE数据名的OCCURS子句创建的。在SEARCH语句中，使用WHEN子句来验证搜索的元素是否满足指定的条件。假设FACIAL-EXP有许多可能的值，那么SEARCH WHEN是另一种条件表达式，如示例7所示。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs COBOL">WORKING-STORAGE SECTION.<br>01  FACIAL-EXP-TABLE REDEFINES FACIAL-EXP-LIST.<br>    05  FACIAL-EXP  PIC X(11) OCCURS n TIMES INDEXED BY INX-A.<br>        88  HAPPY VALUE &quot;HAPPY&quot;.<br>....<br>....<br>PROCEDURE DIVISION.<br>....<br>....<br>SEARCH FACIAL-EXP<br>    WHEN HAPPY(INX-A) DISPLAY &#x27;I am glad you are happy&#x27;<br>END-SEARCH<br></code></pre></div></td></tr></table></figure>

<h3 id="条件"><a href="#条件" class="headerlink" title="条件"></a>条件</h3><p>条件表达式可以在简单条件或复杂条件中指定。简单条件和复杂条件都可以包含在任意数量的成对括号中；但是，括号不会改变条件是简单还是复杂。本节将涵盖五个简单条件中的三个条件：</p>
<ul>
<li><p>关系</p>
</li>
<li><p>类</p>
</li>
<li><p>符号</p>
</li>
</ul>
<h3 id="关系条件"><a href="#关系条件" class="headerlink" title="关系条件"></a>关系条件</h3><p>关系条件指定了两个操作数的比较。连接两个操作数的关系运算符指定了比较的类型。如果两个操作数之间存在指定的关系，则关系条件为真；如果两个操作数之间不存在指定的关系，则关系条件为假。以下是一些定义的比较列表：</p>
<ul>
<li><p>数字比较 - 两个数值类操作数</p>
</li>
<li><p>字母数字比较 - 两个字母数字类操作数</p>
</li>
<li><p>DBCS（双字节字符集）比较 - 两个DBCS类操作数</p>
</li>
<li><p>国际比较 - 两个国际类操作数</p>
</li>
</ul>
<h3 id="类条件"><a href="#类条件" class="headerlink" title="类条件"></a>类条件</h3><p>类条件确定数据项的内容是否为字母、小写字母、大写字母、数字、DBCS、KANJI，或者是否仅包含由环境部分的SPECIAL-NAMES段中的CLASS子句中指定的字符集中的字符。以下是不同类型数据项的类条件的一些有效形式的列表。</p>
<ul>
<li><p>数字</p>
<ul>
<li>IS NUMERIC或IS NOT NUMERIC</li>
</ul>
</li>
<li><p>字母</p>
<ul>
<li><p>IS ALPHABETIC或IS NOT ALPHABETIC</p>
</li>
<li><p>IS ALPHABETIC-LOWER / ALPHABETIC-UPPER</p>
</li>
<li><p>IS NOT ALPHABETIC-LOWER / ALPHABETIC-UPPER</p>
</li>
</ul>
</li>
<li><p>DBCS</p>
<ul>
<li><p>IS DBCS或IS NOT DBCS</p>
</li>
<li><p>IS KANJI或IS NOT KANJI</p>
</li>
</ul>
</li>
</ul>
<h3 id="符号条件"><a href="#符号条件" class="headerlink" title="符号条件"></a>符号条件</h3><p>符号条件确定数值操作数的代数值是否大于、小于或等于零。无符号操作数要么是POSITIVE，要么是ZERO。当使用带有符号的数值条件变量时，可以使用以下条件：</p>
<ul>
<li><p>IS POSITIVE</p>
</li>
<li><p>IS NEGATIVE</p>
</li>
<li><p>IS ZERO</p>
</li>
</ul>
<p><strong>注意</strong>: 要获取更多关于这些条件的信息，请访问以下链接：</p>
<p><a target="_blank" rel="noopener" href="https://www.ibm.com/docs/en/cobol-zos/6.4?topic=structure-conditional-expressions">https://www.ibm.com/docs/en/cobol-zos/6.4?topic=structure-conditional-expressions</a></p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/program/">program</a>
                    
                  </div>
                
              </div>
              
                
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/10/01/COBOL%E8%80%83%E5%8F%A4%EF%BC%88%E5%8D%81%E4%B8%80%EF%BC%89/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">COBOL考古（十一）</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/10/01/COBOL%E8%80%83%E5%8F%A4%EF%BC%88%E4%B9%9D%EF%BC%89/">
                        <span class="hidden-mobile">COBOL考古（九）</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


            

                
                  <a id="scroll-top-button" href="#" role="button">
                    <i class="iconfont icon-arrowup" aria-hidden="true"></i>
                  </a>
                  

                    
                      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
                        

                          
      </main>

      <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://whale3070.github.io/" target="_blank" rel="nofollow noopener"><span>Whale3070</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  

  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>






  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      var inputArea = document.querySelector("#local-search-input");
      inputArea.onclick = function () {
        searchFunc(path, 'local-search-input', 'local-search-result');
        this.onclick = null
      }
    })()
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>



    </body>

  </html>